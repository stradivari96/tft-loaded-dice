import pytest

from tft_loaded_dice import best_champions, champion_odds
from tft_loaded_dice.exceptions import ChampionNotFoundException


def test_not_found():
    with pytest.raises(ChampionNotFoundException):
        champion_odds("Bob")


@pytest.mark.parametrize(
    "champion,level,best", [("Galio", 8, "Taric"), ("Jhin", 9, "Tristana")]
)
def test_best_champions(champion, level, best):
    assert best_champions(champion, level)[0][0] == best


@pytest.mark.parametrize(
    "champion,odds",
    [
        (
            "Leona",
            {
                "Blitzcrank": {
                    3: 0.0,
                    4: 0.075,
                    5: 0.1,
                    6: 0.15,
                    7: 0.175,
                    8: 0.175,
                    9: 0.15,
                    10: 0.1,
                    11: 0.06,
                },
                "Braum": {
                    3: 0.0,
                    4: 0.075,
                    5: 0.1,
                    6: 0.15,
                    7: 0.175,
                    8: 0.175,
                    9: 0.15,
                    10: 0.1,
                    11: 0.06,
                },
                "Darius": {
                    3: 0.0,
                    4: 0.075,
                    5: 0.1,
                    6: 0.15,
                    7: 0.175,
                    8: 0.175,
                    9: 0.15,
                    10: 0.1,
                    11: 0.06,
                },
                "Galio": {
                    3: 0.0,
                    4: 0.05,
                    5: 0.06666666666666667,
                    6: 0.1,
                    7: 0.11666666666666665,
                    8: 0.11666666666666665,
                    9: 0.1,
                    10: 0.06666666666666667,
                    11: 0.04,
                },
                "Garen": {
                    3: 0.0,
                    4: 0.15,
                    5: 0.2,
                    6: 0.3,
                    7: 0.35,
                    8: 0.35,
                    9: 0.3,
                    10: 0.2,
                    11: 0.12,
                },
                "Graves": {
                    3: 0.0,
                    4: 0.075,
                    5: 0.1,
                    6: 0.15,
                    7: 0.175,
                    8: 0.175,
                    9: 0.15,
                    10: 0.1,
                    11: 0.06,
                },
                "Katarina": {
                    3: 0.0,
                    4: 0.05,
                    5: 0.06666666666666667,
                    6: 0.1,
                    7: 0.11666666666666665,
                    8: 0.11666666666666665,
                    9: 0.1,
                    10: 0.06666666666666667,
                    11: 0.04,
                },
                "Leona": {
                    3: 0.0,
                    4: 0.15,
                    5: 0.2,
                    6: 0.3,
                    7: 0.35,
                    8: 0.35,
                    9: 0.3,
                    10: 0.2,
                    11: 0.12,
                },
                "Lux": {
                    3: 0.0,
                    4: 0.05,
                    5: 0.06666666666666667,
                    6: 0.1,
                    7: 0.11666666666666665,
                    8: 0.11666666666666665,
                    9: 0.1,
                    10: 0.06666666666666667,
                    11: 0.04,
                },
                "Poppy": {
                    3: 0.0,
                    4: 0.05,
                    5: 0.06666666666666667,
                    6: 0.1,
                    7: 0.11666666666666665,
                    8: 0.11666666666666665,
                    9: 0.1,
                    10: 0.06666666666666667,
                    11: 0.04,
                },
                "Yone": {
                    3: 0.0,
                    4: 0.075,
                    5: 0.1,
                    6: 0.15,
                    7: 0.175,
                    8: 0.175,
                    9: 0.15,
                    10: 0.1,
                    11: 0.06,
                },
                "Yuumi": {
                    3: 0.0,
                    4: 0.05,
                    5: 0.06666666666666667,
                    6: 0.1,
                    7: 0.11666666666666665,
                    8: 0.11666666666666665,
                    9: 0.1,
                    10: 0.06666666666666667,
                    11: 0.04,
                },
            },
        ),
    ],
)
def test_get_champion_odds(champion, odds):
    assert champion_odds(champion) == odds
